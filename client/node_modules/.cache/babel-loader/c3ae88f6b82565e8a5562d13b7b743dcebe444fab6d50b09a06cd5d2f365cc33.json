{"ast":null,"code":"import _regeneratorRuntime from\"/root/apps/ems/dest/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/root/apps/ems/dest/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/root/apps/ems/dest/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/root/apps/ems/dest/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{getemails}from\"../action/getemails\";import{sendemail}from\"../action/sendemail\";import\"./Dashboard.css\";import\"../App.css\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),emailList=_useState2[0],setEmailList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedEmail=_useState4[0],setSelectedEmail=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),subject=_useState6[0],setSubject=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),html=_useState8[0],setHtml=_useState8[1];var updateSelectedEmail=function updateSelectedEmail(e){if(!selectedEmail.find(function(item){return item===e.target.value;})){setSelectedEmail([].concat(_toConsumableArray(selectedEmail),[e.target.value]));}else{console.log(\"inside\");setSelectedEmail(selectedEmail.filter(function(item){return item!==e.target.value;}));}};var selectAll=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var confirm,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:confirm=window.confirm(\"Once the process get started it cannot be stopped , Are you Sure you to send to all ?\");if(!confirm){_context.next=5;break;}result=emailList.map(function(item){return item.email;});_context.next=5;return sendemail({emails:result,html:html,subject:subject});case 5:case\"end\":return _context.stop();}},_callee);}));return function selectAll(){return _ref.apply(this,arguments);};}();var sendMail=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var confirm;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:confirm=window.confirm(\"Once the process get started it cannot be stopped , Are you Sure you to send to selected email? \\n Email Count : \".concat(selectedEmail.length));if(!confirm){_context2.next=4;break;}_context2.next=4;return sendemail({emails:selectedEmail,html:html,subject:subject});case 4:case\"end\":return _context2.stop();}},_callee2);}));return function sendMail(){return _ref2.apply(this,arguments);};}();var fetchData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var result;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getemails(navigate);case 2:result=_context3.sent;setEmailList(result);case 4:case\"end\":return _context3.stop();}},_callee3);}));return function fetchData(){return _ref3.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"DashboardWrapper center-div\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",marginTop:\"1rem\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Email Sender\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-1\",style:{fontSize:\"0.8rem\",padding:\"0.1rem 1rem\"},onClick:function onClick(){localStorage.clear();navigate(\"/\");},children:\"Log Out\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Dashboard_Left\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setSubject(e.target.value);},placeholder:\"Subject\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"HTML/CSS\",onChange:function onChange(e){return setHtml(e.target.value);},style:{width:\"100%\",height:\"50vh\",padding:\"1rem\"}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:selectAll,className:\"btn-1\",style:{margin:\"1rem\"},children:\"Send To ALL\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMail,className:\"btn-1\",style:{margin:\"1rem\"},children:\"Send Emails\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Dashboard_Right\",children:emailList.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"Dashboard_Item\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:item===null||item===void 0?void 0:item.email,onChange:updateSelectedEmail,id:item===null||item===void 0?void 0:item.id}),/*#__PURE__*/_jsx(\"label\",{htmlFor:item===null||item===void 0?void 0:item.id,children:item===null||item===void 0?void 0:item.email})]},item===null||item===void 0?void 0:item._id);})})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","getemails","sendemail","useNavigate","jsx","_jsx","jsxs","_jsxs","Dashboard","navigate","_useState","_useState2","_slicedToArray","emailList","setEmailList","_useState3","_useState4","selectedEmail","setSelectedEmail","_useState5","_useState6","subject","setSubject","_useState7","_useState8","html","setHtml","updateSelectedEmail","e","find","item","target","value","concat","_toConsumableArray","console","log","filter","selectAll","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","confirm","result","wrap","_callee$","_context","prev","next","window","map","email","emails","stop","apply","arguments","sendMail","_ref2","_callee2","_callee2$","_context2","length","fetchData","_ref3","_callee3","_callee3$","_context3","sent","className","children","style","display","justifyContent","alignItems","marginTop","fontSize","padding","onClick","localStorage","clear","type","onChange","placeholder","width","height","margin","id","htmlFor","_id"],"sources":["/root/apps/ems/dest/client/src/pages/Dashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getemails } from \"../action/getemails\";\r\nimport { sendemail } from \"../action/sendemail\";\r\nimport \"./Dashboard.css\";\r\nimport \"../App.css\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Dashboard = () => {\r\n  const navigate = useNavigate();\r\n  const [emailList, setEmailList] = useState([]);\r\n  const [selectedEmail, setSelectedEmail] = useState([]);\r\n  const [subject, setSubject] = useState();\r\n  const [html, setHtml] = useState();\r\n\r\n  const updateSelectedEmail = (e) => {\r\n    if (!selectedEmail.find((item) => item === e.target.value)) {\r\n      setSelectedEmail([...selectedEmail, e.target.value]);\r\n    } else {\r\n      console.log(\"inside\");\r\n      setSelectedEmail(selectedEmail.filter((item) => item !== e.target.value));\r\n    }\r\n  };\r\n  const selectAll = async () => {\r\n    const confirm = window.confirm(\r\n      \"Once the process get started it cannot be stopped , Are you Sure you to send to all ?\"\r\n    );\r\n    if (confirm) {\r\n      const result = emailList.map((item) => item.email);\r\n      await sendemail({ emails: result, html: html, subject: subject });\r\n    }\r\n  };\r\n  const sendMail = async () => {\r\n    const confirm = window.confirm(\r\n      `Once the process get started it cannot be stopped , Are you Sure you to send to selected email? \\n Email Count : ${selectedEmail.length}`\r\n    );\r\n    if (confirm) {\r\n      await sendemail({ emails: selectedEmail, html: html, subject: subject });\r\n    }\r\n  };\r\n  const fetchData = async () => {\r\n    const result = await getemails(navigate);\r\n    setEmailList(result);\r\n  };\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"DashboardWrapper center-div\">\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          marginTop: \"1rem\",\r\n        }}\r\n      >\r\n        <h2>Email Sender</h2>\r\n        <button\r\n          className=\"btn-1\"\r\n          style={{ fontSize: \"0.8rem\", padding: \"0.1rem 1rem\" }}\r\n          onClick={() => {\r\n            localStorage.clear();\r\n            navigate(\"/\");\r\n          }}\r\n        >\r\n          Log Out\r\n        </button>\r\n      </div>\r\n      <div className=\"Dashboard\">\r\n        <div className=\"Dashboard_Left\">\r\n          <input\r\n            type=\"text\"\r\n            onChange={(e) => setSubject(e.target.value)}\r\n            placeholder=\"Subject\"\r\n          />\r\n          <textarea\r\n            placeholder=\"HTML/CSS\"\r\n            onChange={(e) => setHtml(e.target.value)}\r\n            style={{ width: \"100%\", height: \"50vh\", padding: \"1rem\" }}\r\n          ></textarea>\r\n          <div>\r\n            <button\r\n              onClick={selectAll}\r\n              className=\"btn-1\"\r\n              style={{ margin: \"1rem\" }}\r\n            >\r\n              Send To ALL\r\n            </button>\r\n            <button\r\n              onClick={sendMail}\r\n              className=\"btn-1\"\r\n              style={{ margin: \"1rem\" }}\r\n            >\r\n              Send Emails\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"Dashboard_Right\">\r\n          {emailList.map((item) => {\r\n            return (\r\n              <div key={item?._id} className=\"Dashboard_Item\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  value={item?.email}\r\n                  onChange={updateSelectedEmail}\r\n                  id={item?.id}\r\n                />\r\n                <label htmlFor={item?.id}>{item?.email}</label>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}